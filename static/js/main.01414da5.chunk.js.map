{"version":3,"sources":["components/RoomDisplay.js","logic/intranets-api/index.js","logic/bookings/index.js","containers/RoomDisplayPage.js","containers/RoomsPage.js","containers/RoomPage.js","containers/SitesPage.js","containers/SitePage.js","App.js","index.js"],"names":["AddBooking","props","useState","onClick","onAdd","ViewBooking","style","padding","momenttz","start","dateTime","tz","format","end","onDelete","id","host","callAxios","config","Promise","resolve","reject","axios","then","response","data","catch","error","getRoomBookingsForToday","email","method","url","headers","getRoom","getRooms","result","value","_","sortBy","getSites","getSiteRooms","addBooking","startDateTime","endDateTime","timeZone","deleteBooking","getCurrentBookingStatus","bookings","now","isAvailable","availableFrom","availableTo","currentBooking","nextBooking","moment","startOf","toISOString","endOfToday","endOf","forEach","booking","bookedFrom","bookedTo","isAfter","isBetween","slots24hour","slots","hour","min","push","status","RoomDisplay","room","setRoom","useEffect","a","setRoomBookings","run","roomBookings","availableText","CurrentStatus","className","fontSize","textAlign","add","window","location","reload","DisplayHeader","displayName","ComingUp","Clock","day","Rooms","rooms","setRooms","map","key","emailAddress","to","href","Room","Sites","sites","setSites","site","Slots","display","slot","class","subject","MyTimeLine","groups","items","defaultTimeStart","defaultTimeEnd","loaded","setLoaded","refresh","setRefresh","setGroups","setItems","c","myGroups","myItems","length","group","title","start_time","end_time","target","cloneDeep","App","Home","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01414da5.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport \"./display.css\"\r\nimport moment from \"moment\"\r\nimport momenttz from \"moment-timezone\"\r\nimport TimePicker from 'react-time-picker';\r\n\r\nexport const Buzy = (props) => {\r\n    return (  <div className=\"buzy-container\">{props.title}\r\n    <div className=\"buzy-container-status-red\">\r\n\r\n    </div>\r\n    </div>);\r\n}\r\n\r\nexport const Free = () => {\r\n    return (  <div>Free</div>);\r\n}\r\n\r\nexport const Next = () => {\r\n    return (  <div>Next</div>);\r\n}\r\n\r\nexport const AddBooking = (props) => {\r\n    const [value, onChange] = useState('10:00');\r\n    /**\r\n     *  <TimePicker\r\n        onChange={onChange}\r\n        value={value}\r\n      />\r\n     */\r\n    return (  <div>\r\n       \r\n        <button onClick={()=>{\r\n            if (props.onAdd){\r\n                props.onAdd()\r\n            }\r\n        }}>Book now</button>\r\n        </div>);\r\n}\r\n \r\n \r\n\r\nexport const ViewBooking = (props) => {\r\n    return (  <div style={{padding:\"10px\"}}>\r\n        \r\n        <div>{momenttz(props.start.dateTime).tz(\"Europe/Paris\").format(\"hh:mm\")} - {momenttz(props.end.dateTime).tz(\"Europe/Paris\").format(\"hh:mm\")}</div>\r\n        {props.onDelete && <button onClick={()=>{\r\n            if (props.onDelete){\r\n                props.onDelete(props.id)\r\n            }\r\n        }}>Delete Booking</button>}\r\n        </div>); \r\n}\r\n\r\n","import axios from \"axios\";\r\nimport _ from \"lodash\"\r\nconst host = true\r\n  ? \"https://nets-intranets-api.azurewebsites.net\"\r\n  : \"http://localhost:8000\";\r\n\r\nfunction callAxios(config) {\r\n  return new Promise((resolve, reject) => {\r\n    axios(config)\r\n      .then(function (response) {\r\n        resolve(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function getRoomBookingsForToday(email) {\r\n  var config = {\r\n    method: \"get\",\r\n    url: host + \"/v1.0/rooms/\" + email + \"/todays-bookings\",\r\n    headers: {},\r\n  };\r\n\r\n  return callAxios(config);\r\n}\r\n\r\nexport function getRoom(email) {\r\n  var config = {\r\n    method: \"get\",\r\n    url: host + \"/v1.0/rooms/\" + email,\r\n    headers: {},\r\n  };\r\n\r\n  return callAxios(config);\r\n}\r\n\r\nexport function getRooms() {\r\n  var config = {\r\n    method: \"get\",\r\n    url: host + \"/v1.0/rooms\",\r\n    headers: {},\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    callAxios(config)\r\n      .then((result) => {\r\n        result.value = _.sortBy(result.value,[\"displayName\"])\r\n        resolve(result);\r\n      })\r\n      .catch((error) => reject(error));\r\n  });\r\n}\r\n\r\n\r\nexport function getSites() {\r\n  var config = {\r\n    method: \"get\",\r\n    url: host + \"/v1.0/sites\",\r\n    headers: {},\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    callAxios(config)\r\n      .then((result) => {\r\n        result.value = _.sortBy(result.value,[\"displayName\"])\r\n        resolve(result);\r\n      })\r\n      .catch((error) => reject(error));\r\n  });\r\n}\r\n\r\n\r\nexport function getSiteRooms(email) {\r\n  var config = {\r\n    method: \"get\",\r\n    url: host + \"/v1.0/sites/\"+email,\r\n    headers: {},\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    callAxios(config)\r\n      .then((result) => {\r\n        result.value = _.sortBy(result.value,[\"displayName\"])\r\n        resolve(result);\r\n      })\r\n      .catch((error) => reject(error));\r\n  });\r\n}\r\n\r\n\r\nexport function addBooking(email, startDateTime, endDateTime) {\r\n  var data = { startDateTime, endDateTime, timeZone: \"UTC\" };\r\n\r\n  var config = {\r\n    method: \"post\",\r\n    url: host + \"/v1.0/bookings/\" + email,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    data: data,\r\n  };\r\n\r\n  return callAxios(config);\r\n}\r\n\r\nexport function deleteBooking(email, id) {\r\n  var config = {\r\n    method: \"delete\",\r\n    url: host + \"/v1.0/bookings/\" + email + \"/\" + id,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  return callAxios(config);\r\n}\r\n","import moment from \"moment\";\r\nimport _ from \"lodash\"\r\n\r\n\r\n\r\n\r\n\r\nfunction todayHourMinute(h,m){\r\n    var date = moment()\r\n    date .set('hour',h)\r\n    date .set('minute',m)\r\n}\r\nfunction booking(fromH,fromM,toH,toM,oranizer){\r\n\r\nreturn {\r\n    start : todayHourMinute(fromH,fromM),\r\n    end : todayHourMinute(toH,toM)\r\n\r\n}\r\n}\r\nexport function mockBooking(){\r\n\r\n    var bookings = []\r\n    bookings.push()\r\n}\r\n\r\nexport function getCurrentBookingStatus(bookings,now){\r\n    var isAvailable, availableFrom,availableTo,currentBooking,nextBooking \r\n\r\n    isAvailable = true\r\n  \r\n\r\n    var startOfToday = moment(now).startOf(\"day\").toISOString();\r\n    var endOfToday = moment(now).endOf(\"day\").toISOString();\r\n\r\n    availableFrom = moment(now)\r\n    availableTo = endOfToday\r\n\r\n//    bookings =  _.sortBy(bookings,[(o)=>{return o.start.dateTime}])\r\n    var foundCurrentBooking = false\r\n    bookings.forEach(booking => {\r\n        var bookedFrom = moment(booking.start.dateTime)\r\n        var bookedTo = moment(booking.end.dateTime)\r\n        \r\n        if (!nextBooking && moment(bookedFrom).isAfter(moment())){\r\n            nextBooking = booking\r\n            availableTo = moment(booking.start.dateTime)\r\n        }   \r\n                     \r\n\r\n        if (moment(now).isBetween(bookedFrom,bookedTo)){\r\n            isAvailable = false\r\n            currentBooking = booking\r\n            availableFrom = moment(booking.end.dateTime)\r\n            \r\n        }\r\n        \r\n    });\r\n    \r\n\r\n\r\nreturn [isAvailable,availableFrom,availableTo,currentBooking,nextBooking ]\r\n}\r\n\r\n\r\nexport function slots24hour(bookings){\r\n    var slots = []\r\n    for (let hour = 7; hour  < 18; hour++) {\r\n        for (let min = 0; min < 60; min+=15) {\r\n            slots.push({hour,min,bookings:[],status:\"free\"})\r\n\r\n\r\n            \r\n        }\r\n    }\r\n\r\n    return slots    \r\n\r\n\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Free,\r\n  Buzy,\r\n  Next,\r\n  ViewBooking,\r\n  AddBooking,\r\n} from \"../components/RoomDisplay\";\r\nimport {\r\n  getRoom,\r\n  getRoomBookingsForToday,\r\n  addBooking,\r\n  deleteBooking,\r\n} from \"../logic/intranets-api\";\r\n\r\nimport { useTimer } from \"react-timer-hook\";\r\nimport { getCurrentBookingStatus } from \"../logic/bookings\";\r\nimport moment from \"moment-timezone\";\r\n\r\nimport \"./RoomDisplayPage.css\";\r\nconst RoomDisplay = (props) => {\r\n  \r\n  const [room, setRoom] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      getRoomBookingsForToday(props.email).then((data) =>\r\n        setRoomBookings(data.value)\r\n      );\r\n      getRoom(props.email).then((room) => {\r\n        setRoom(room);\r\n      });\r\n    }\r\n    run();\r\n  }, [props.email]);\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [roomBookings, setRoomBookings] = useState([]);\r\n  var [\r\n    isAvailable,\r\n    availableFrom,\r\n    availableTo,\r\n    currentBooking,\r\n    nextBooking,\r\n    availableText,\r\n  ] = getCurrentBookingStatus(roomBookings, moment());\r\n\r\n  const CurrentStatus = () => {\r\n    return (\r\n      <div\r\n        className={isAvailable ? \"room-available\" : \"room-buzy\"}\r\n        style={{ fontSize: \"100px\", textAlign: \"center\" }}\r\n      >\r\n        {isAvailable && (\r\n          <div>\r\n            <div className=\"status-block\">\r\n              <div className=\"status-heading\">Available</div>\r\n              <div className=\"status-subheading\">\r\n                Available next {availableText}\r\n              </div>\r\n            </div>\r\n            <AddBooking\r\n              onAdd={async (startDateTime, endDateTime) => {\r\n                startDateTime = moment().format(\"YYYY-MM-DDTHH:mm:00\");\r\n\r\n                endDateTime = moment()\r\n                  .add(15, \"m\")\r\n                  .format(\"YYYY-MM-DDTHH:mm:00\");\r\n                await addBooking(props.email, startDateTime, endDateTime);\r\n                window.location.reload();\r\n                //setRefresh(refresh + 1);\r\n              }}\r\n            ></AddBooking>\r\n          </div>\r\n        )}\r\n        {!isAvailable && (\r\n          <div>\r\n            <ViewBooking\r\n              onDelete={async (id) => {\r\n                await deleteBooking(props.email, id);\r\n                window.location.reload();\r\n              }}\r\n              {...currentBooking}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  const DisplayHeader = () => {\r\n    return <div className=\"displaytitle\"> {room.displayName} </div>;\r\n  };\r\n\r\n  const ComingUp = () => {\r\n    if (!nextBooking) return <div>No upcoming meetings</div>;\r\n    return (\r\n      <div>\r\n        Next booking\r\n        <ViewBooking {...nextBooking} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const ListAllBookings = () => {\r\n    return (\r\n      <div>\r\n        <div style={{ padding: \"16px\" }}></div>\r\n        {roomBookings.map((booking) => {\r\n          return (\r\n            <ViewBooking\r\n              onDelete={async (id) => {\r\n                await deleteBooking(props.room.email, id);\r\n                window.location.reload();\r\n              }}\r\n              {...booking}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const Clock = () => {\r\n    var now = moment().format(\"HH:MM\");\r\n    var day = moment().format(\"dddd, MMMM D, YYYY\");\r\n    return (\r\n      <div className=\"clock\">\r\n        <div className=\"clock-hm\">{now}</div>\r\n\r\n        <div className=\"clock-day\">{day}</div>\r\n      </div>\r\n    );\r\n  };\r\n  /**\r\n   * <span>{days}</span>:<span>{hours}</span>:<span>{minutes}</span>:<span>{seconds}</span>\r\n   */\r\n  return (\r\n    <div>\r\n      <DisplayHeader />\r\n\r\n      <CurrentStatus />\r\n      <div className=\"next\">\r\n        <div className=\"nextHeader\">NEXT</div>\r\n        <ComingUp />\r\n      </div>\r\n\r\n      <Clock />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomDisplay;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"@reach/router\";\r\nimport { getRooms, getRoomBookingsForToday } from \"../logic/intranets-api\";\r\n\r\nimport \"./Rooms.css\";\r\nconst Rooms = (props) => {\r\n  const [rooms, setRooms] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      getRooms().then((rooms) => setRooms(rooms.value));\r\n    }\r\n    run();\r\n  }, []);\r\n\r\n  const [error, setError] = useState(\"\");\r\n  return (\r\n    <div>\r\n      ROOMS\r\n      <div>\r\n        {rooms.map((room, key) => {\r\n          return (\r\n            <div>\r\n            {room.displayName} ({room.emailAddress})\r\n              <Link to={\"/room/\" + room.emailAddress + \"/display\"}>\r\n                display\r\n              </Link>\r\n              <a\r\n                href={\r\n                  \"https://outlook.office.com/calendar/\" + room.emailAddress\r\n                }\r\n              >\r\n                {\" \"}\r\n                Outlook Calendar\r\n              </a>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rooms;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Free,\r\n  Buzy,\r\n  Next,\r\n  ViewBooking,\r\n  AddBooking,\r\n} from \"../components/RoomDisplay\";\r\nimport {\r\n  getRoom,\r\n  getRoomBookingsForToday,\r\n  addBooking,\r\n  deleteBooking,\r\n} from \"../logic/intranets-api\";\r\n\r\nimport { useTimer } from \"react-timer-hook\";\r\nimport { getCurrentBookingStatus } from \"../logic/bookings\";\r\nimport moment from \"moment-timezone\";\r\n\r\nimport \"./RoomDisplayPage.css\";\r\nconst Room = (props) => {\r\n  \r\n  const [room, setRoom] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      getRoomBookingsForToday(props.email).then((data) =>\r\n        setRoomBookings(data.value)\r\n      );\r\n      getRoom(props.email).then((room) => {\r\n        setRoom(room);\r\n      });\r\n    }\r\n    run();\r\n  }, [props.email]);\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [roomBookings, setRoomBookings] = useState([]);\r\n  var [\r\n    isAvailable,\r\n    availableFrom,\r\n    availableTo,\r\n    currentBooking,\r\n    nextBooking,\r\n    availableText,\r\n  ] = getCurrentBookingStatus(roomBookings, moment());\r\n\r\n  const CurrentStatus = () => {\r\n    return (\r\n      <div\r\n        className={isAvailable ? \"room-available\" : \"room-buzy\"}\r\n        style={{ fontSize: \"100px\", textAlign: \"center\" }}\r\n      >\r\n        {isAvailable && (\r\n          <div>\r\n            <div className=\"status-block\">\r\n              <div className=\"status-heading\">Available</div>\r\n              <div className=\"status-subheading\">\r\n                Available next {availableText}\r\n              </div>\r\n            </div>\r\n            <AddBooking\r\n              onAdd={async (startDateTime, endDateTime) => {\r\n                startDateTime = moment().format(\"YYYY-MM-DDTHH:mm:00\");\r\n\r\n                endDateTime = moment()\r\n                  .add(15, \"m\")\r\n                  .format(\"YYYY-MM-DDTHH:mm:00\");\r\n                await addBooking(props.email, startDateTime, endDateTime);\r\n                window.location.reload();\r\n                //setRefresh(refresh + 1);\r\n              }}\r\n            ></AddBooking>\r\n          </div>\r\n        )}\r\n        {!isAvailable && (\r\n          <div>\r\n            <ViewBooking\r\n              onDelete={async (id) => {\r\n                await deleteBooking(props.email, id);\r\n                window.location.reload();\r\n              }}\r\n              {...currentBooking}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  const DisplayHeader = () => {\r\n    return <div className=\"displaytitle\"> {room.displayName} </div>;\r\n  };\r\n\r\n  const ComingUp = () => {\r\n    if (!nextBooking) return <div>No upcoming meetings</div>;\r\n    return (\r\n      <div>\r\n        Next booking\r\n        <ViewBooking {...nextBooking} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const ListAllBookings = () => {\r\n    return (\r\n      <div>\r\n        <div style={{ padding: \"16px\" }}></div>\r\n        {roomBookings.map((booking) => {\r\n          return (\r\n            <ViewBooking\r\n              onDelete={async (id) => {\r\n                await deleteBooking(props.room.email, id);\r\n                window.location.reload();\r\n              }}\r\n              {...booking}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const Clock = () => {\r\n    var now = moment().format(\"HH:MM\");\r\n    var day = moment().format(\"dddd, MMMM D, YYYY\");\r\n    return (\r\n      <div className=\"clock\">\r\n        <div className=\"clock-hm\">{now}</div>\r\n\r\n        <div className=\"clock-day\">{day}</div>\r\n      </div>\r\n    );\r\n  };\r\n  /**\r\n   * <span>{days}</span>:<span>{hours}</span>:<span>{minutes}</span>:<span>{seconds}</span>\r\n   */\r\n  return (\r\n    <div>\r\n      <DisplayHeader />\r\n\r\n      <CurrentStatus />\r\n      <div className=\"next\">\r\n        <div className=\"nextHeader\">NEXT</div>\r\n        <ComingUp />\r\n      </div>\r\n\r\n      <Clock />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {Link} from \"@reach/router\"\r\nimport {\r\n  getSites\r\n} from \"../logic/intranets-api\";\r\n\r\nimport \"./Rooms.css\";\r\nconst Sites = (props) => {\r\n  \r\n  const [sites, setSites] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n    getSites().then(sites=>setSites(sites.value))      \r\n    }\r\n    run();\r\n  }, []);\r\n\r\n  const [error, setError] = useState(\"\");\r\n  return (\r\n    <div>\r\n    SITES\r\n    <div>\r\n    {sites.map((site,key)=>{\r\n\r\n      return <div><Link to={\"/sites/\"+site.emailAddress}>{site.displayName}</Link></div>\r\n      \r\n    })}\r\n\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sites;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"@reach/router\";\r\nimport { getSiteRooms, getRoomBookingsForToday } from \"../logic/intranets-api\";\r\n\r\nimport \"./Rooms.css\";\r\nimport { slots24hour } from \"../logic/bookings\";\r\n\r\nimport Timeline from \"react-calendar-timeline\";\r\n// make sure you include the timeline stylesheet or the timeline will not be styled\r\nimport \"react-calendar-timeline/lib/Timeline.css\";\r\nimport _ from \"lodash\";\r\nimport moment from \"moment\";\r\n\r\nconst Slots = (props) => {\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      {props.slots.map((slot, key) => {\r\n        return (\r\n          <div key={key} class={\"slot slot-\" + slot.status}>\r\n            {slot.hour}:{slot.min}\r\n            {slot.bookings &&\r\n              slot.bookings.map((booking, key) => {\r\n                return <div key={key}>{booking.subject}</div>;\r\n              })}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MyTimeLine = (props) => {\r\n  return (\r\n    <Timeline\r\n      groups={props.groups}\r\n      items={props.items}\r\n      defaultTimeStart={moment().add(-12, \"hour\")}\r\n      defaultTimeEnd={moment().add(12, \"hour\")}\r\n    />\r\n  );\r\n};\r\nconst Rooms = (props) => {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [refresh, setRefresh] = useState(0);\r\n  const [groups, setGroups] = useState([]);\r\n  const [items, setItems] = useState([\r\n    \r\n  ]);\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (loaded) return;\r\n      getSiteRooms(props.email).then(async (data) => {\r\n        setLoaded(true);\r\n        setRooms(data.value);\r\n\r\n\r\n        var c = 0;\r\n        var myGroups = []\r\n        var myItems = []\r\n        data.value.forEach(async (room) => {\r\n          var bookings = await getRoomBookingsForToday(room.emailAddress);\r\n          \r\n          \r\n            \r\n            bookings.value.forEach((booking) => {\r\n              myItems.push({\r\n                id: myItems.length+1,\r\n                group: room.emailAddress,\r\n                title: \"item 1\",\r\n                start_time: booking.start.dateTime,\r\n                end_time: booking.end.dateTime,\r\n              });\r\n            });\r\n          \r\n\r\n          myGroups.push({ id: room.emailAddress, title: room.displayName });\r\n      \r\n          \r\n\r\n          room.bookings = bookings.value;\r\n          //debugger\r\n          c++;\r\n          setRefresh(c);\r\n          setRooms(data.value);\r\n        });\r\n        setItems(myItems);\r\n        setGroups(myGroups);\r\n      });\r\n    }\r\n    run();\r\n  }, [refresh]);\r\n\r\n  const [error, setError] = useState(\"\");\r\n\r\n  return (\r\n    <div>\r\n      ROOMS\r\n      <div>\r\n        {rooms.map((room, key) => {\r\n          return (\r\n            <div style={{ display: \"flex\" }}>\r\n              <div className=\"columnn-room\">\r\n                <a\r\n                  target=\"_blank\"\r\n                  href={\r\n                    \"https://outlook.office.com/calendar/\" + room.emailAddress\r\n                  }\r\n                >\r\n                  {\" \"}\r\n                  {room.displayName}{\" \"}\r\n                </a>\r\n              </div>\r\n              {room.bookings && (\r\n                <div>\r\n                  {room.bookings.length}\r\n                  <Slots slots={slots24hour(room.bookings)} />\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <MyTimeLine groups={_.cloneDeep(groups)} items={_.cloneDeep(items)} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rooms;\r\n","import React from \"react\";\nimport HomePage from \"./containers/HomePage\";\nimport RoomDisplay from \"./containers/RoomDisplayPage\";\nimport Rooms from \"./containers/RoomsPage\";\nimport Room from \"./containers/RoomPage\";\nimport Sites from \"./containers/SitesPage\";\nimport Site from \"./containers/SitePage\";\nimport \"./App.css\";\nimport { Router, Link } from \"@reach/router\";\nfunction App() {\n  const Home = () => {\n    return null;\n  };\n  return (\n    <div className=\"section min-height-100\">\n      <div className=\"container  min-height-100\">\n      <div style={{display:\"flex\"}}>\n      <div  style={{padding:10}}>\n        <Link to=\"/sites\">Sites</Link>\n      </div>\n      <div  style={{padding:10}}>\n        <Link to=\"/room\">Rooms</Link>\n      </div>\n      </div>\n\n        <Router>\n          <Home path=\"/\" />\n          <Sites path=\"/sites\" />\n          <Site path=\"/sites/:email\" />\n\n          <Rooms path=\"/room\" />\n          <Room path=\"/room/:email\" />\n          <RoomDisplay path=\"/room/:email/display\" />\n        </Router>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n//})"],"sourceRoot":""}