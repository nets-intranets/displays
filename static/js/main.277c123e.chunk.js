(this["webpackJsonpremy-room-display"]=this["webpackJsonpremy-room-display"]||[]).push([[0],{33:function(e,t,n){e.exports=n(90)},39:function(e,t,n){},84:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=n(4),l=n.n(i),u=n(10),s=n(5),m=(n(39),n(2)),d=n.n(m),f=n(6),p=n.n(f),v=(n(42),function(e){var t=Object(a.useState)("10:00"),n=Object(s.a)(t,2);n[0],n[1];return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.onAdd&&e.onAdd()}},"Book now"))}),E=function(e){return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("div",null,p()(e.start.dateTime).tz("Europe/Paris").format("hh:mm")," - ",p()(e.end.dateTime).tz("Europe/Paris").format("hh:mm")),e.onDelete&&r.a.createElement("button",{onClick:function(){e.onDelete&&e.onDelete(e.id)}},"Delete Booking"))},h=n(31),b=n.n(h),O="https://nets-intranets-api.azurewebsites.net";function y(e){return new Promise((function(t,n){b()(e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))}function j(e){return y({method:"get",url:O+"/v1.0/rooms/"+e+"/todays-bookings",headers:{}})}function g(e){return y({method:"get",url:O+"/v1.0/rooms/"+e,headers:{}})}function k(){return y({method:"get",url:O+"/v1.0/rooms",headers:{}})}function w(e,t,n){return y({method:"post",url:O+"/v1.0/bookings/"+e,headers:{"Content-Type":"application/json"},data:{startDateTime:t,endDateTime:n,timeZone:"UTC"}})}function N(e,t){return y({method:"delete",url:O+"/v1.0/bookings/"+e+"/"+t,headers:{"Content-Type":"application/json"}})}n(82),n(83);n(84);var x=function(e){var t=Object(a.useState)({}),n=Object(s.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j(e.email).then((function(e){return O(e.value)})),g(e.email).then((function(e){o(e)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.email]);var i=Object(a.useState)(""),m=Object(s.a)(i,2),f=(m[0],m[1],Object(a.useState)([])),h=Object(s.a)(f,2),b=h[0],O=h[1],y=function(e,t){var n,a,r,c,o;n=!0,d()(t).startOf("day").toISOString();var i=d()(t).endOf("day").toISOString();return a=d()(t),r=i,e.forEach((function(e){var i=d()(e.start.dateTime),l=d()(e.end.dateTime);!o&&d()(i).isAfter(d()())&&(o=e,r=d()(e.start.dateTime)),d()(t).isBetween(i,l)&&(n=!1,c=e,a=d()(e.end.dateTime))})),[n,a,r,c,o]}(b,p()()),k=Object(s.a)(y,6),x=k[0],T=(k[1],k[2],k[3]),S=k[4],D=k[5],M=function(){return r.a.createElement("div",{className:x?"room-available":"room-buzy",style:{fontSize:"100px",textAlign:"center"}},x&&r.a.createElement("div",null,r.a.createElement("div",{className:"status-block"},r.a.createElement("div",{className:"status-heading"},"Available"),r.a.createElement("div",{className:"status-subheading"},"Available next ",D)),r.a.createElement(v,{onAdd:function(){var t=Object(u.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p()().format("YYYY-MM-DDTHH:mm:00"),a=p()().add(15,"m").format("YYYY-MM-DDTHH:mm:00"),t.next=4,w(e.email,n,a);case 4:window.location.reload();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),!x&&r.a.createElement("div",null,r.a.createElement(E,Object.assign({onDelete:function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e.email,n);case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T))))},Y=function(){return r.a.createElement("div",{className:"displaytitle"}," ",c.displayName," ")},A=function(){return S?r.a.createElement("div",null,"Next booking",r.a.createElement(E,S)):r.a.createElement("div",null,"No upcoming meetings")},H=function(){var e=p()().format("HH:MM"),t=p()().format("dddd, MMMM D, YYYY");return r.a.createElement("div",{className:"clock"},r.a.createElement("div",{className:"clock-hm"},e),r.a.createElement("div",{className:"clock-day"},t))};return r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement(M,null),r.a.createElement("div",{className:"next"},r.a.createElement("div",{className:"nextHeader"},"NEXT"),r.a.createElement(A,null)),r.a.createElement(H,null))},T=n(12),S=(n(88),function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k().then((function(e){return o(e.value)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i=Object(a.useState)(""),m=Object(s.a)(i,2);m[0],m[1];return r.a.createElement("div",null,"ROOMS",r.a.createElement("div",null,c.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(T.a,{to:"/room/"+e.emailAddress},e.displayName))}))))});n(89);var D=function(){var e=function(){return r.a.createElement("div",null,r.a.createElement(T.a,{to:"/room"},"Rooms"))};return r.a.createElement("div",{className:"section min-height-100"},r.a.createElement("div",{className:"container  min-height-100"},r.a.createElement(T.b,null,r.a.createElement(e,{path:"/"}),r.a.createElement(S,{path:"/room"}),r.a.createElement(x,{path:"/room/:email"}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.277c123e.chunk.js.map