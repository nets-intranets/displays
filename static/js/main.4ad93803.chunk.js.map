{"version":3,"sources":["components/RoomDisplay.js","logic/intranets-api/index.js","containers/RoomDisplayPage.js","App.js","index.js"],"names":["AddBooking","props","onClick","onAdd","ViewBooking","style","padding","organizer","emailAddress","name","address","momenttz","start","dateTime","tz","format","end","onDelete","id","callAxios","config","Promise","resolve","reject","axios","then","response","data","catch","error","getRoomBookingsForToday","email","method","url","headers","getRoom","addBooking","startDateTime","endDateTime","deleteBooking","RoomDisplay","useState","room","setRoom","refresh","useTimer","autoStart","expiryTimestamp","Date","now","onExpire","console","warn","seconds","minutes","hours","days","isRunning","pause","resume","restart","useEffect","a","setRoomBookings","value","run","roomBookings","title","fontSize","window","location","reload","map","booking","App","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4ad93803.chunk.js","sourcesContent":["import React from 'react';\r\nimport \"./display.css\"\r\nimport moment from \"moment\"\r\nimport momenttz from \"moment-timezone\"\r\nexport const Buzy = (props) => {\r\n    return (  <div className=\"buzy-container\">{props.title}\r\n    <div className=\"buzy-container-status-red\">\r\n\r\n    </div>\r\n    </div>);\r\n}\r\n\r\nexport const Free = () => {\r\n    return (  <div>Free</div>);\r\n}\r\n\r\nexport const Next = () => {\r\n    return (  <div>Next</div>);\r\n}\r\n\r\nexport const AddBooking = (props) => {\r\n    return (  <div>\r\n        <button onClick={()=>{\r\n            if (props.onAdd){\r\n                props.onAdd()\r\n            }\r\n        }}>Add Booking</button>\r\n        </div>);\r\n}\r\n \r\n \r\n\r\nexport const ViewBooking = (props) => {\r\n    return (  <div style={{padding:\"10px\"}}>\r\n         <div>Organizer: {props.organizer.emailAddress.name} ({props.organizer.emailAddress.address})</div>\r\n        <div>{momenttz(props.start.dateTime).tz(\"Europe/Paris\").format(\"hh:mm\")} - {momenttz(props.end.dateTime).tz(\"Europe/Paris\").format(\"hh:mm\")}</div>\r\n        <button onClick={()=>{\r\n            if (props.onDelete){\r\n                props.onDelete(props.id)\r\n            }\r\n        }}>Delete Booking</button>\r\n        </div>); \r\n}\r\n\r\n","import axios from \"axios\";\r\n\r\nfunction callAxios(config) {\r\n  return new Promise((resolve, reject) => {\r\n    axios(config)\r\n      .then(function (response) {\r\n        resolve(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function getRoomBookingsForToday(email) {\r\n    \r\nvar config = {\r\n  method: 'get',\r\n  url: 'https://nets-intranets-api.azurewebsites.net/v1.0/room/todays-bookings/ConfRoom2@niegrejoh.onmicrosoft.com',\r\n  headers: { \r\n    'Cookie': 'ARRAffinity=ff0fc5d39aabac4576907838eb0a630c9b0bc10114083b2334023199b7c16e27'\r\n  }\r\n};\r\n\r\nreturn callAxios(config)\r\n}\r\n\r\nexport function getRoom(email) {\r\n    \r\n  var config = {\r\n    method: 'get',\r\n    url: 'https://nets-intranets-api.azurewebsites.net/v1.0/room/todays-bookings/ConfRoom2@niegrejoh.onmicrosoft.com',\r\n    headers: { \r\n      'Cookie': 'ARRAffinity=ff0fc5d39aabac4576907838eb0a630c9b0bc10114083b2334023199b7c16e27'\r\n    }\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    resolve({})\r\n  });\r\n  //return callAxios(config)\r\n  }\r\n  \r\n\r\n  export function addBooking(email,startDateTime,endDateTime) {\r\n    \r\n    var data = {startDateTime,endDateTime,\"timeZone\":\"Europe/Paris\"}\r\n\r\n    var config = {\r\n      method: 'post',\r\n      url: 'http://localhost:8000/v1.0/book/'+email,\r\n      headers: { \r\n        'Content-Type': 'application/json'\r\n      },\r\n      data : data\r\n    };\r\n\r\n    return callAxios(config)\r\n    }\r\n    \r\n    export function deleteBooking(email,id) {\r\n    \r\n    \r\n      var config = {\r\n        method: 'delete',\r\n        url: 'http://localhost:8000/v1.0/booking/'+email + \"/\" + id,\r\n        headers: { \r\n          'Content-Type': 'application/json'\r\n        },\r\n        \r\n      };\r\n  \r\n      return callAxios(config)\r\n      }\r\n      ","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Free,\r\n  Buzy,\r\n  Next,\r\n  ViewBooking,\r\n  AddBooking,\r\n} from \"../components/RoomDisplay\";\r\nimport {\r\n  getRoom,\r\n  getRoomBookingsForToday,\r\n  addBooking,\r\n  deleteBooking,\r\n} from \"../logic/intranets-api\";\r\n\r\nimport { useTimer } from \"react-timer-hook\";\r\nimport { getCurrentBookingStatus } from \"../logic/bookings\";\r\n\r\nconst RoomDisplay = (props) => {\r\n  const [room, setRoom] = useState({});\r\n  const [refresh, setRefresh] = useState(0);\r\n  const {\r\n    seconds,\r\n    minutes,\r\n    hours,\r\n    days,\r\n    isRunning,\r\n    start,\r\n    pause,\r\n    resume,\r\n    restart,\r\n  } = useTimer({\r\n    autoStart: true,\r\n    expiryTimestamp: Date.now() + 5000,\r\n    onExpire: () => console.warn(\"onExpire called\"),\r\n  });\r\n\r\n  useEffect(\r\n    () => {\r\n      async function run() {\r\n        getRoomBookingsForToday(props.email).then((data) =>\r\n          setRoomBookings(data.value)\r\n        );\r\n        getRoom(props.email).then((room) => setRoom(room));\r\n      }\r\n      run();\r\n    },\r\n    [props.email],\r\n    refresh\r\n  );\r\n\r\n  const [roomBookings, setRoomBookings] = useState([]);\r\n  /**\r\n   * <span>{days}</span>:<span>{hours}</span>:<span>{minutes}</span>:<span>{seconds}</span>\r\n   */\r\n  return (\r\n    <div>\r\n      Room {room.title}\r\n      <div style={{ fontSize: \"100px\" }}></div>\r\n      <div style={{ padding: \"16px\" }}>\r\n        <AddBooking\r\n          onAdd={async (startDateTime, endDateTime) => {\r\n            startDateTime = \"2020-07-02T12:00:00\";\r\n            endDateTime = \"2020-07-02T13:00:00\";\r\n            await addBooking(props.room.email, startDateTime, endDateTime);\r\n            window.location.reload();\r\n            //setRefresh(refresh + 1);\r\n          }}\r\n        ></AddBooking>\r\n      </div>\r\n      {roomBookings.map((booking) => {\r\n        return (\r\n          <ViewBooking\r\n            onDelete={async (id) => {\r\n              await deleteBooking(props.room.email, id);\r\n              window.location.reload();\r\n            }}\r\n            {...booking}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomDisplay;\r\n","import React from 'react';\nimport HomePage from \"./containers/HomePage\"\nimport RoomDisplay from './containers/RoomDisplayPage';\nimport \"./App.css\"\nfunction App() {\n  return (\n    <div className=\"section min-height-100\">\n    <div className=\"container  min-height-100\">\n    <RoomDisplay room={{title:\"Room\",email:\"ConfRoom2@niegrejoh.onmicrosoft.com\"}}/>\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n//})"],"sourceRoot":""}